# Week 8: 评估标准

本文档详细说明结课项目的评估标准和自评方法。

---

## 评估概览

| 维度 | 分数 | 说明 |
|------|------|------|
| **功能完整性** | 60分 | 所有必需功能是否正常工作 |
| **代码质量** | 20分 | 代码组织、命名、文档 |
| **测试** | 10分 | 测试覆盖和质量 |
| **用户体验** | 10分 | 易用性、错误提示 |
| **总分** | 100分 | |

**及格线**：70分  
**优秀线**：85分

---

## 1. 功能完整性 (60分)

### 项目 1: 钱包工具

#### 1.1 地址管理 (12分)

**优秀 (10-12分)**:
- ✅ 生成地址格式正确
- ✅ 列表显示完整信息
- ✅ 标签功能正常
- ✅ 删除有确认提示
- ✅ 边界情况处理（如重复地址）

**良好 (7-9分)**:
- ✅ 基本功能都能工作
- ⚠️ 某些边界情况未处理
- ⚠️ 显示格式需改进

**及格 (4-6分)**:
- ✅ 能够生成和列出地址
- ❌ 缺少标签或删除功能
- ❌ 用户体验较差

**不及格 (0-3分)**:
- ❌ 基本功能不能正常工作

#### 1.2 余额查询 (15分)

**优秀 (13-15分)**:
- ✅ API 调用成功
- ✅ 结果解析正确
- ✅ 显示格式美观
- ✅ 错误处理完善（网络、API限流等）
- ✅ 有加载提示

**良好 (10-12分)**:
- ✅ 基本查询功能正常
- ⚠️ 错误处理不够完善
- ⚠️ 缺少加载提示

**及格 (7-9分)**:
- ✅ 能够查询余额
- ❌ 错误处理不足
- ❌ 显示格式需改进

**不及格 (0-6分)**:
- ❌ 无法正常查询

#### 1.3 UTxO 查看 (9分)

**优秀 (8-9分)**:
- ✅ 显示完整的 UTxO 信息
- ✅ 计算总额正确
- ✅ 格式清晰

**良好 (6-7分)**:
- ✅ 基本信息显示
- ⚠️ 格式需改进

**及格 (4-5分)**:
- ✅ 能够显示 UTxO
- ❌ 信息不完整

**不及格 (0-3分)**:
- ❌ 功能不能工作

#### 1.4 交易构建 (12分)

**优秀 (10-12分)**:
- ✅ UTxO 选择算法正确
- ✅ 费用计算合理
- ✅ 交易验证通过
- ✅ JSON 格式正确
- ✅ 边界情况处理

**良好 (7-9分)**:
- ✅ 基本构建功能正常
- ⚠️ 某些情况处理不够完善

**及格 (4-6分)**:
- ✅ 能够构建简单交易
- ❌ 验证或格式有问题

**不及格 (0-3分)**:
- ❌ 无法构建交易

#### 1.5 状态持久化 (6分)

**优秀 (5-6分)**:
- ✅ 保存和加载正常
- ✅ JSON 格式规范
- ✅ 错误处理完善

**良好 (4分)**:
- ✅ 基本功能正常
- ⚠️ 某些情况需改进

**及格 (2-3分)**:
- ✅ 能够保存数据
- ❌ 加载或格式有问题

**不及格 (0-1分)**:
- ❌ 无法正常保存

#### 1.6 CLI 界面 (6分)

**优秀 (5-6分)**:
- ✅ 帮助信息完整
- ✅ 参数解析正确
- ✅ 错误提示清晰

**良好 (4分)**:
- ✅ 基本命令工作
- ⚠️ 帮助或提示需改进

**及格 (2-3分)**:
- ✅ 主要命令能用
- ❌ 帮助不够清晰

**不及格 (0-1分)**:
- ❌ 命令解析有问题

### 项目 2: 余额监控器

#### 2.1 监控列表管理 (9分)

类似钱包工具的地址管理评分标准。

#### 2.2 定期检查 (15分)

**优秀 (13-15分)**:
- ✅ 定时循环准确
- ✅ 并发查询正确
- ✅ 错误处理和重试
- ✅ 优雅退出

**良好 (10-12分)**:
- ✅ 基本功能正常
- ⚠️ 并发或错误处理需改进

**及格 (7-9分)**:
- ✅ 能够定期检查
- ❌ 某些功能缺失

**不及格 (0-6分)**:
- ❌ 定时功能不正常

#### 2.3 变化检测 (12分)

**优秀 (10-12分)**:
- ✅ 检测准确
- ✅ 计算正确
- ✅ 记录完整

**良好 (7-9分)**:
- ✅ 基本检测正常
- ⚠️ 某些情况需改进

**及格 (4-6分)**:
- ✅ 能够检测变化
- ❌ 计算或记录有问题

**不及格 (0-3分)**:
- ❌ 检测不准确

#### 2.4 控制台通知 (9分)

**优秀 (8-9分)**:
- ✅ 通知及时
- ✅ 格式美观
- ✅ 信息完整

**良好 (6-7分)**:
- ✅ 基本通知功能
- ⚠️ 格式需改进

**及格 (4-5分)**:
- ✅ 能够通知
- ❌ 格式或信息不够

**不及格 (0-3分)**:
- ❌ 通知不能正常工作

#### 2.5 数据持久化 (9分)

类似钱包工具的评分标准，包括历史记录。

#### 2.6 配置管理 (6分)

**优秀 (5-6分)**:
- ✅ YAML 格式正确
- ✅ 所有配置项工作
- ✅ 错误处理完善

**良好 (4分)**:
- ✅ 基本配置加载
- ⚠️ 某些配置项需改进

**及格 (2-3分)**:
- ✅ 能够加载配置
- ❌ 某些功能不完整

**不及格 (0-1分)**:
- ❌ 配置加载有问题

---

## 2. 代码质量 (20分)

### 2.1 模块组织 (8分)

**优秀 (7-8分)**:
- ✅ 模块职责清晰
- ✅ 依赖关系合理
- ✅ 无循环依赖
- ✅ 公共接口设计良好

**示例**:
```haskell
-- 好的模块组织
Wallet/
├── Types.hs       -- 只有类型定义
├── Address.hs     -- 地址操作
├── Balance.hs     -- 余额查询
└── CLI.hs         -- CLI 接口
```

**良好 (5-6分)**:
- ✅ 基本模块化
- ⚠️ 某些模块职责不够清晰

**及格 (3-4分)**:
- ✅ 有模块划分
- ❌ 组织不够合理

**不及格 (0-2分)**:
- ❌ 所有代码在一个文件
- ❌ 模块划分混乱

### 2.2 命名 (4分)

**优秀 (4分)**:
- ✅ 变量名清晰描述用途
- ✅ 函数名动词开头
- ✅ 类型名大写开头
- ✅ 一致的命名风格

**示例**:
```haskell
-- 好的命名
queryBalance :: Address -> IO (Either Error Lovelace)
formatAmount :: Lovelace -> String
data AddressInfo = AddressInfo { ... }

-- 不好的命名
f :: String -> IO (Either String Int)
x1 :: Int -> String
data Addr = Addr { ... }
```

**良好 (3分)**:
- ✅ 大部分命名清晰
- ⚠️ 个别需改进

**及格 (2分)**:
- ⚠️ 命名基本可读
- ❌ 不够一致

**不及格 (0-1分)**:
- ❌ 命名混乱或无意义

### 2.3 类型签名 (4分)

**优秀 (4分)**:
- ✅ 所有导出函数有类型签名
- ✅ 类型签名准确
- ✅ 适当使用 newtype

**示例**:
```haskell
-- 所有公共函数都有类型签名
module Wallet.Balance
  ( queryBalance
  , formatBalance
  ) where

queryBalance :: Config -> Address -> IO (Either Error Lovelace)
queryBalance = ...

formatBalance :: Lovelace -> String
formatBalance = ...

-- 内部函数也建议有类型签名
parseResponse :: Value -> Either String Lovelace
parseResponse = ...
```

**良好 (3分)**:
- ✅ 大部分函数有类型签名
- ⚠️ 个别缺失

**及格 (2分)**:
- ⚠️ 主要函数有类型签名
- ❌ 许多缺失

**不及格 (0-1分)**:
- ❌ 大部分无类型签名

### 2.4 注释和文档 (4分)

**优秀 (4分)**:
- ✅ 模块顶部有说明
- ✅ 复杂函数有注释
- ✅ 数据类型有文档
- ✅ 使用 Haddock 格式

**示例**:
```haskell
-- | Query the balance of a Cardano address.
--
-- This function uses the Blockfrost API to query the current balance.
-- It handles API errors and network issues gracefully.
--
-- Example:
-- >>> queryBalance config (Address "addr_test1q...")
-- Right (Lovelace 10000000)
--
-- Errors:
-- * 'APIError' if the API request fails
-- * 'NetworkError' if the network is unreachable
queryBalance :: Config -> Address -> IO (Either Error Lovelace)
```

**良好 (3分)**:
- ✅ 关键部分有注释
- ⚠️ 不够完整

**及格 (2分)**:
- ⚠️ 有基本注释
- ❌ 许多关键部分缺失

**不及格 (0-1分)**:
- ❌ 几乎无注释

---

## 3. 测试 (10分)

### 3.1 单元测试 (5分)

**优秀 (5分)**:
- ✅ 使用 Hspec 或 QuickCheck
- ✅ 覆盖主要功能
- ✅ 包含边界情况
- ✅ 所有测试通过

**示例**:
```haskell
spec :: Spec
spec = do
  describe "Address validation" $ do
    it "accepts valid testnet addresses" $ do
      validateAddress "addr_test1q..." `shouldSatisfy` isRight
    
    it "rejects mainnet addresses" $ do
      validateAddress "addr1q..." `shouldSatisfy` isLeft
    
    it "rejects invalid format" $ do
      validateAddress "invalid" `shouldSatisfy` isLeft
  
  describe "Balance formatting" $ do
    it "converts lovelace to ADA correctly" $ do
      formatBalance 1000000 `shouldBe` "1.000000 ADA"
    
    it "handles large amounts" $ do
      formatBalance 45000000000000 `shouldBe` "45000000.000000 ADA"
```

**良好 (3-4分)**:
- ✅ 有基本测试
- ⚠️ 覆盖不够完整

**及格 (1-2分)**:
- ✅ 有少量测试
- ❌ 覆盖很少

**不及格 (0分)**:
- ❌ 无测试

### 3.2 手动测试 (5分)

**优秀 (5分)**:
- ✅ 有详细的测试文档
- ✅ 覆盖所有功能
- ✅ 包含错误情况
- ✅ 测试结果记录

**测试文档示例**:
```markdown
## 手动测试记录

### 测试 1: 地址生成
- 操作: `wallet generate "Test"`
- 预期: 生成 addr_test1q... 格式地址
- 结果: ✅ 通过
- 截图: screenshots/test1.png

### 测试 2: 余额查询
- 操作: `wallet balance addr_test1q...`
- 预期: 显示余额
- 结果: ✅ 通过

### 测试 3: 错误处理
- 操作: `wallet balance invalid_address`
- 预期: 显示错误消息
- 结果: ✅ 通过，消息清晰

...
```

**良好 (3-4分)**:
- ✅ 有基本测试记录
- ⚠️ 不够详细

**及格 (1-2分)**:
- ⚠️ 有简单测试
- ❌ 文档不足

**不及格 (0分)**:
- ❌ 无测试文档

---

## 4. 用户体验 (10分)

### 4.1 帮助信息 (3分)

**优秀 (3分)**:
- ✅ 有完整的 help 命令
- ✅ 每个命令都有说明
- ✅ 包含使用示例

**示例**:
```
$ wallet help

Cardano Wallet Tool v1.0

USAGE:
    wallet <COMMAND> [OPTIONS]

COMMANDS:
    generate [label]         Generate a new address
    list                     List all addresses
    balance <addr>           Query balance of an address
    utxos <addr>             View UTxOs of an address
    send <from> <to> <amt>   Build a payment transaction
    help                     Show this help message

EXAMPLES:
    wallet generate "My Wallet"
    wallet balance addr_test1q...
    wallet send addr1 addr2 10.5

For more info: https://example.com/docs
```

**良好 (2分)**:
- ✅ 有帮助信息
- ⚠️ 不够详细

**及格 (1分)**:
- ⚠️ 有基本帮助
- ❌ 很简略

**不及格 (0分)**:
- ❌ 无帮助信息

### 4.2 错误消息 (3分)

**优秀 (3分)**:
- ✅ 错误消息清晰
- ✅ 提供解决建议
- ✅ 避免技术术语

**示例**:
```haskell
-- 好的错误消息
"错误：无法连接到 Blockfrost API
  原因：网络超时
  建议：
    1. 检查网络连接
    2. 确认 API Key 是否正确
    3. 尝试稍后重试"

-- 不好的错误消息
"Error: Network.HTTP.Req.HttpException"
```

**良好 (2分)**:
- ✅ 错误消息基本清晰
- ⚠️ 缺少建议

**及格 (1分)**:
- ⚠️ 有错误消息
- ❌ 不够友好

**不及格 (0分)**:
- ❌ 错误消息混乱

### 4.3 操作反馈 (2分)

**优秀 (2分)**:
- ✅ 长时间操作有进度提示
- ✅ 操作完成有确认
- ✅ 状态清晰

**示例**:
```
$ wallet refresh
正在刷新余额...
[1/5] 查询 addr_test1q...abc ✓
[2/5] 查询 addr_test1q...def ✓
[3/5] 查询 addr_test1q...ghi ✓
[4/5] 查询 addr_test1q...jkl ✓
[5/5] 查询 addr_test1q...mno ✓
完成！所有余额已更新。
```

**良好 (1分)**:
- ✅ 有基本反馈
- ⚠️ 不够详细

**不及格 (0分)**:
- ❌ 无反馈

### 4.4 文档 (2分)

**优秀 (2分)**:
- ✅ README 完整
- ✅ 包含安装、使用、配置说明
- ✅ 有示例

**良好 (1分)**:
- ✅ 有基本 README
- ⚠️ 某些部分缺失

**不及格 (0分)**:
- ❌ 无文档或很不完整

---

## 自评清单

使用此清单自我评估你的项目：

### 功能检查

**钱包工具**:
- [ ] 能生成地址
- [ ] 能查询余额
- [ ] 能查看 UTxOs
- [ ] 能构建交易
- [ ] 能保存/加载状态
- [ ] CLI 正常工作

**余额监控器**:
- [ ] 能添加/删除地址
- [ ] 能定期检查
- [ ] 能检测变化
- [ ] 能显示通知
- [ ] 能保存历史
- [ ] 配置文件工作

### 代码质量检查

- [ ] 模块组织清晰
- [ ] 命名规范一致
- [ ] 所有导出函数有类型签名
- [ ] 关键部分有注释
- [ ] 无编译警告

### 测试检查

- [ ] 有至少 3-5 个单元测试
- [ ] 测试都通过
- [ ] 有手动测试文档
- [ ] 边界情况都考虑了

### 用户体验检查

- [ ] 有 help 命令
- [ ] 错误消息清晰
- [ ] 长操作有进度提示
- [ ] README 完整

---

## 评分示例

### 示例 1: 优秀项目 (92分)

- **功能** (56/60): 所有功能完整，有1-2个可选功能
- **代码** (18/20): 组织优秀，有少量命名可改进
- **测试** (10/10): 测试完整，文档详细
- **UX** (8/10): 体验良好，文档稍简

**评语**: 优秀的项目！功能完整，代码质量高，测试充分。

### 示例 2: 良好项目 (80分)

- **功能** (50/60): 必需功能都有，少数边界情况未处理
- **代码** (15/20): 组织基本合理，注释不够
- **测试** (7/10): 有基本测试，覆盖不完整
- **UX** (8/10): 用户体验良好

**评语**: 良好的项目。功能基本完整，代码质量可接受，建议加强测试。

### 示例 3: 及格项目 (72分)

- **功能** (45/60): 核心功能工作，某些功能不完整
- **代码** (12/20): 基本模块化，命名和注释需改进
- **测试** (5/10): 测试较少
- **UX** (10/10): 用户体验较好

**评语**: 及格的项目。核心功能能用，但代码质量和测试需加强。

---

## 提升建议

### 从及格到良好

1. **完善所有必需功能**
2. **改进模块组织**
3. **添加更多测试**
4. **改进错误处理**

### 从良好到优秀

1. **处理所有边界情况**
2. **完善代码注释**
3. **增加测试覆盖**
4. **实现1-2个可选功能**
5. **优化用户体验**

---

## 常见问题

**Q: 必须达到多少分才算完成课程？**  
A: 70分及格。但建议争取 85+ 分以展示你的能力。

**Q: 可选功能算分吗？**  
A: 可选功能可以弥补其他地方的失分，但必需功能必须先完成。

**Q: 代码质量真的重要吗？**  
A: 非常重要！好的代码质量体现专业能力。

**Q: 如何知道自己的分数？**  
A: 使用本文档的自评清单，诚实评估自己。

---

**准备好了吗？** 使用这个评估标准指导你的开发，争取做出优秀的项目！💪

